/*
 * jquery-circle-progress - jQuery Plugin to draw animated circular progress bars
 *
 * @author https://github.com/kottenator
 * @version 0.6.0
 */
$.circleProgress={defaults:{value:0,size:120,startAngle:-Math.PI,thickness:"auto",fill:{color:["#ffffff"]},emptyFill:"rgba(255, 255, 255, .3)",animation:{duration:1200,easing:"circleProgressEasing"}}},$.easing.circleProgressEasing=function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},$.fn.circleProgress=function(a){return"widget"==a?this.data("circle-progress"):(a=$.extend({},$.circleProgress.defaults,a),this.each(function(){function p(a){k.clearRect(0,0,c,c),q(a),r(a)}function q(a){k.save(),k.beginPath(),k.arc(d,d,d-e/2,g,g+2*Math.PI*a),k.lineWidth=e,k.strokeStyle=i,k.stroke(),k.restore()}function r(a){k.save(),a<1&&(k.beginPath(),a<=0?k.arc(d,d,d-e/2,0,2*Math.PI):k.arc(d,d,d-e/2,g+2*Math.PI*a,g),k.lineWidth=e,k.strokeStyle=h,k.stroke()),k.restore()}function s(c){b.trigger("circle-animation-start"),$(j).css({progress:0}).animate({progress:c},$.extend({},a.animation,{step:function(a){p(a),b.trigger("circle-animation-progress",[a/c,a])},complete:function(){b.trigger("circle-animation-end")}}))}var i,b=$(this),c=a.size,d=c/2,e=c/14,f=a.value,g=a.startAngle,h=a.emptyFill;$.isNumeric(a.thickness)&&(e=a.thickness);var j=b.data("circle-progress");j||(j=$("<canvas>").prependTo(b)[0],b.data("circle-progress",j)),j.width=c,j.height=c;var k=j.getContext("2d");if(!a.fill)throw Error("The fill is not specified!");if(a.fill.color&&(i=a.fill.color),a.fill.gradient){var l=a.fill.gradient;if(1==l.length)i=l[0];else if(l.length>1){for(var m=k.createLinearGradient(0,0,c,0),n=0;n<l.length;n++)m.addColorStop(n/(l.length-1),l[n]);i=m}}if(a.fill.image){var o=new Image;o.src=a.fill.image,o.onload=function(){var b=$("<canvas>")[0];b.width=c,b.height=c,b.getContext("2d").drawImage(o,0,0,c,c),i=k.createPattern(b,"no-repeat"),a.animation||p(f)}}a.animation?s(f):p(f)}))};